{"version":3,"sources":["../admin/auditing.js","../admin/radiusauditlog.js"],"names":["init","$","on","event","click","preventDefault","milliseconds","a","currentTarget","timespec","hash","replace","amount","parseInt","exec","type","end_time","Date","start_time","getTime","start_date_input","start_time_input","datepicker","timepicker","toTimeString","end_date_input","end_time_input","attr","match","delegateTarget","id","emptyId","trigger","addClass","modal","saved_search_form","search_form","uri","URI","query","resource","serialize","find","ajax","url","data","always","reset","done","location","reload","fail","jqXHR","animate","scrollTop","status_msg","getStatusMsg","showError","this","focus","window","hashchange","pfOnHashChange","updateSection","items","RadiusAuditLog","RadiusAuditLogView","parent","prototype","Items","formName","modalId","get","options","success","errorSibling","post","ItemView","call","F"],"mappings":"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","file":"auditing.js","sourcesContent":["/* -*- Mode: js; indent-tabs-mode: nil; js-indent-level: 4 -*- */\n\n$(function() { // DOM ready\n});\n\nfunction init() {\n  $('#section').on('section.loaded', function(event) {\n        $('#report_radius_audit_log .radiud_audit_log_datetimepicker a').click(function(event) {\n            event.preventDefault();\n            var a = event.currentTarget;\n            var timespec = a.hash.replace(/^#last/,\"\");\n            var amount = parseInt(/^\\d+/.exec(timespec)[0]);\n            var type = /[^\\d]+$/.exec(timespec)[0];\n            var milliseconds;\n            if(type === \"mins\") {\n                milliseconds = amount * 60 * 1000;\n            } else if( type === \"hours\" || type === \"hour\" ) {\n                milliseconds = amount * 60 * 60 * 1000;\n            }\n            var end_time = new Date();\n            var start_time = new Date(end_time.getTime() - milliseconds);\n            var start_date_input = $('#start_date');\n            var start_time_input = $('#start_time');\n            start_date_input.datepicker(\"setDate\", start_time);\n            start_time_input.timepicker(\"setTime\",start_time.toTimeString());\n            var end_date_input = $('#end_date');\n            var end_time_input = $('#end_time');\n            end_date_input.attr(\"value\", \"\");\n            end_time_input.attr(\"value\", \"\");\n            return false;\n        });\n        $('[id$=\"Empty\"]').on('click', '[href=\"#add\"]', function(event) {\n            var match = /(.+)Empty/.exec(event.delegateTarget.id);\n            var id = match[1];\n            var emptyId = match[0];\n            $('#'+id).trigger('addrow');\n            $('#'+emptyId).addClass('hidden');\n            return false;\n        });\n        var modal  = $(\"#savedSearch\");\n        var saved_search_form = $(\"#savedSearchForm\");\n        var search_form = $('#search');\n        saved_search_form.on('submit', function(event) {\n            modal.modal('hide');\n            var uri = new URI(search_form.attr('action'));\n            var query = uri.resource() +\n                \"?\" +\n                search_form.serialize();\n            query = query.replace(/^\\//,'');\n            saved_search_form\n            .find('[name=\"query\"]')\n            .attr('value',query);\n            $.ajax({\n                'url'  : saved_search_form.attr('action'),\n                'type' : saved_search_form.attr('method') || \"POST\",\n                'data' : saved_search_form.serialize()\n                })\n                .always(function() {\n                    modal.modal('hide');\n                    saved_search_form[0].reset();\n                })\n                .done(function(data) {\n                    location.reload();\n                })\n                .fail(function(jqXHR) {\n                    $(\"body,html\").animate({scrollTop:0}, 'fast');\n                    var status_msg = getStatusMsg(jqXHR);\n                    showError($('#section h2'), status_msg);\n                });\n            return false;\n        });\n        modal.on('shown', function(event) {\n            $(this).find(':input:first').focus();\n        });\n    });\n    /* Initialize datepickers */\n  $(window).hashchange(pfOnHashChange(updateSection,'/auditing/radiuslog/'));\n  $(window).hashchange();\n}\n","$(function() { // DOM ready\n    var items = new RadiusAuditLog();\n    var view = new RadiusAuditLogView({ items: items, parent: $('#section') });\n});\n\n/*\n * The RadiusAuditLog class defines the operations available from the controller.\n */\nvar RadiusAuditLog = function() {\n};\n\nRadiusAuditLog.prototype = new Items();\n\nRadiusAuditLog.prototype.id  = '#radiusAuditLog';\n\nRadiusAuditLog.prototype.formName  = 'modalRadiusAuditLog';\n\nRadiusAuditLog.prototype.modalId   = '#modalRadiusAuditLog';\n\nRadiusAuditLog.prototype.get = function(options) {\n    $.ajax({\n        url: options.url\n    })\n        .always(options.always)\n        .done(options.success)\n        .fail(function(jqXHR) {\n            var status_msg = getStatusMsg(jqXHR);\n            showError(options.errorSibling, status_msg);\n        });\n};\n\nRadiusAuditLog.prototype.post = function(options) {\n    $.ajax({\n        url: options.url,\n        type: 'POST',\n        data: options.data\n    })\n        .always(options.always)\n        .done(options.success)\n        .fail(function(jqXHR) {\n            var status_msg = getStatusMsg(jqXHR);\n            showError(options.errorSibling, status_msg);\n        });\n};\n\n/*\n * The RadiusAuditLogView class defines the DOM operations from the Web interface.\n */\n\n\nvar RadiusAuditLogView = function(options) {\n    ItemView.call(this,options);\n    var that = this;\n    this.parent = options.parent;\n    this.items = options.items;\n};\n\nRadiusAuditLogView.prototype = (function(){\n    function F(){}\n    F.prototype = ItemView.prototype;\n    return new F();\n})();\n\n"]}